<!--
 * @Author: lijy
-->
<!--
 * @Author: lijy
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // call() 方法使用一个指定的 this 值和单独给出的一个或者多个参数来调用一个函数
      /* Function.prototype.myCall = function (_this, ...args) {
        // 改变 this 指向
        _this.fn = this;
        // 将其他参数传递给 result
        const result = _this.fn(...args);
        // 删除这个变量
        delete _this.fn;
        // 返回 result 结果
        return result;
      };
      // 测试
      function Product(name, price) {
        this.name = name;
        this.price = price;
      }
      function Food(name, price) {
        // Product.call(this, name, price)
        Product.myCall(this, name, price);
        this.category = "food";
      }
      console.log(new Food("cheese", 5).name);
        */

      // apply() 方法
      /* Function.prototype.myApply = function (_this, args = []) {
        // 改变 this 指向
        _this.fn = this;
        // 将其他函数传给 result
        const result = _this.fn(...args);
        // 删除这个变量
        delete _this.fn;
        // 返回 result
        return result;
      };
      // 测试
      const numbers = [5, 6, 2, 3, 7];
      const max = Math.max.apply(null, numbers);
      const max1 = Math.max.myApply(null, numbers);
      console.log(max);
      console.log(max1); 
      */

      // bind() 方法创建一个新的函数，在bind 被调用时，
      // 这个新函数的 this 被指定为 bind() 的第一个参数，而其余参数将作为新函数的参数，供调用时使用
      Function.prototype.myBind = function (_this, ...args) {
        // 改变 this 指向
        const fn = this;
        return function () {
          //
          return fn.apply(_this, ...args);
        };
      };
      // 测试
      const module = {
        x: 42,
        getX: function () {
          return this.x;
        },
      };
      const unboundGetX = module.getX;
      console.log(unboundGetX()); 
      const boundGetX = unboundGetX.myBind(module);
      console.log(boundGetX());

    </script>
  </body>
</html>
